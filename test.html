<!DOCTYPE html>  
<html lang="zh-CN">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>äººè„¸è¯†åˆ«åŸç† - çŸ¥è¯†é—¯å…³</title>  
    <script src="https://metis-online.fbcontent.cn/metis-misc/zgLDUdmazTYc0B4K6Cor.js"></script>  
    <script src="https://metis-online.fbcontent.cn/metis-misc/zZZY40t7WJC7UdQCPACm.js"></script>  
    <style>  
        body {  
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;  
            background-color: #f0f9ff;  
        }  
        .fade-in {  
            animation: fadeIn 0.5s ease-out;  
        }  
        @keyframes fadeIn {  
            from { opacity: 0; transform: translateY(10px); }  
            to { opacity: 1; transform: translateY(0); }  
        }  
        .option-btn {  
            transition: all 0.2s ease;  
        }  
        .option-btn:hover:not(:disabled) {  
            transform: translateX(5px);  
            background-color: #e0f2fe;  
        }  
        .option-btn.correct {  
            background-color: #dcfce7;  
            border-color: #22c55e;  
            color: #15803d;  
        }  
        .option-btn.wrong {  
            background-color: #fee2e2;  
            border-color: #ef4444;  
            color: #b91c1c;  
        }  
    </style>  
</head>  
<body class="min-h-screen flex items-center justify-center p-4">

    <!-- ç™»å½•ç•Œé¢ -->  
    <div id="login-screen" class="bg-white rounded-2xl shadow-xl p-8 w-full max-w-md fade-in">  
        <div class="text-center mb-8">  
            <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">  
                <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">  
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>  
                </svg>  
            </div>  
            <h1 class="text-2xl font-bold text-gray-800">äººè„¸è¯†åˆ«çŸ¥è¯†é—¯å…³</h1>  
            <p class="text-gray-500 mt-2">åˆä¸­ä¿¡æ¯æŠ€æœ¯é¢„ä¹ æ£€æµ‹</p>  
        </div>  
        
        <form id="login-form" class="space-y-4">  
            <div>  
                <label class="block text-sm font-medium text-gray-700 mb-1">ç­çº§</label>  
                <input type="text" id="class-input" required placeholder="ä¾‹å¦‚ï¼šä¸ƒå¹´çº§1ç­" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition">  
            </div>  
            <div>  
                <label class="block text-sm font-medium text-gray-700 mb-1">å§“å</label>  
                <input type="text" id="name-input" required placeholder="è¯·è¾“å…¥å§“å" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition">  
            </div>  
            <div>  
                <label class="block text-sm font-medium text-gray-700 mb-1">åº§å·</label>  
                <input type="number" id="number-input" required placeholder="è¯·è¾“å…¥åº§å·" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition">  
            </div>  
            <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition transform active:scale-95 shadow-md mt-4">  
                å¼€å§‹ç­”é¢˜  
            </button>  
        </form>  
    </div>

    <!-- ç­”é¢˜ç•Œé¢ -->  
    <div id="quiz-screen" class="hidden bg-white rounded-2xl shadow-xl w-full max-w-2xl overflow-hidden">  
        <!-- é¡¶éƒ¨è¿›åº¦æ¡ -->  
        <div class="bg-gray-100 h-2 w-full">  
            <div id="progress-bar" class="bg-blue-500 h-full transition-all duration-300" style="width: 0%"></div>  
        </div>  
        
        <div class="p-8">  
            <div class="flex justify-between items-center mb-6">  
                <span class="text-sm font-medium text-blue-600 bg-blue-50 px-3 py-1 rounded-full">ç¬¬ <span id="current-q">1</span>/5 é¢˜</span>  
                <span class="text-sm text-gray-500" id="user-info-display"></span>  
            </div>

            <h2 id="question-text" class="text-xl font-bold text-gray-800 mb-6 leading-relaxed"></h2>

            <div id="options-container" class="space-y-3">  
                <!-- é€‰é¡¹å°†é€šè¿‡JSæ’å…¥ -->  
            </div>

            <!-- åé¦ˆåŒºåŸŸ -->  
            <div id="feedback-area" class="hidden mt-6 p-4 rounded-lg bg-gray-50 border border-gray-200">  
                <div class="flex items-start">  
                    <div id="feedback-icon" class="flex-shrink-0 mt-0.5 mr-3">  
                        <!-- å›¾æ ‡ -->  
                    </div>  
                    <div>  
                        <h3 id="feedback-title" class="font-bold text-gray-800 mb-1"></h3>  
                        <p id="feedback-text" class="text-gray-600 text-sm leading-relaxed"></p>  
                    </div>  
                </div>  
            </div>

            <div class="mt-8 flex justify-end">  
                <button id="next-btn" class="hidden bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition shadow-md">  
                    ä¸‹ä¸€é¢˜  
                </button>  
            </div>  
        </div>  
    </div>

    <!-- ç»“æœç•Œé¢ -->  
    <div id="result-screen" class="hidden bg-white rounded-2xl shadow-xl p-8 w-full max-w-md text-center">  
        <div class="mb-6">  
            <div class="w-20 h-20 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4">  
                <span class="text-4xl">ğŸ†</span>  
            </div>  
            <h2 class="text-2xl font-bold text-gray-800">ç­”é¢˜å®Œæˆï¼</h2>  
            <p class="text-gray-500 mt-2" id="result-user"></p>  
        </div>

        <div class="bg-gray-50 rounded-xl p-6 mb-8">  
            <div class="text-sm text-gray-500 mb-1">æœ€ç»ˆå¾—åˆ†</div>  
            <div class="text-5xl font-bold text-blue-600 mb-2"><span id="final-score">0</span><span class="text-2xl text-gray-400">/100</span></div>  
            <p id="score-comment" class="text-sm font-medium text-gray-600"></p>  
        </div>

        <button onclick="location.reload()" class="w-full bg-white border-2 border-blue-600 text-blue-600 hover:bg-blue-50 font-bold py-3 rounded-lg transition">  
            å†è¯•ä¸€æ¬¡  
        </button>  
    </div>

    <script>  
        // é¢˜ç›®æ•°æ®  
        const questions = [  
            {  
                question: "äººè„¸è¯†åˆ«æŠ€æœ¯ä¸»è¦å±äºäººå·¥æ™ºèƒ½çš„å“ªä¸ªé¢†åŸŸï¼Ÿ",  
                options: ["è¯­éŸ³è¯†åˆ«", "å›¾åƒè¯†åˆ«", "è‡ªç„¶è¯­è¨€å¤„ç†", "ä¸“å®¶ç³»ç»Ÿ"],  
                correct: 1,  
                explanation: "äººè„¸è¯†åˆ«æ˜¯åŸºäºäººçš„è„¸éƒ¨ç‰¹å¾ä¿¡æ¯è¿›è¡Œèº«ä»½è¯†åˆ«çš„ä¸€ç§ç”Ÿç‰©è¯†åˆ«æŠ€æœ¯ï¼Œå±äºå›¾åƒè¯†åˆ«ï¼ˆè®¡ç®—æœºè§†è§‰ï¼‰çš„èŒƒç•´ã€‚"  
            },  
            {  
                question: "äººè„¸è¯†åˆ«ç³»ç»Ÿçš„æ ¸å¿ƒå¤„ç†æ­¥éª¤é€šå¸¸**ä¸åŒ…æ‹¬**ä»¥ä¸‹å“ªä¸€é¡¹ï¼Ÿ",  
                options: ["äººè„¸æ£€æµ‹", "ç‰¹å¾æå–", "å›¾åƒå‹ç¼©", "äººè„¸æ¯”å¯¹"],  
                correct: 2,  
                explanation: "æ ¸å¿ƒæ­¥éª¤é€šå¸¸æ˜¯äººè„¸æ£€æµ‹ã€äººè„¸å¯¹é½ã€ç‰¹å¾æå–å’Œäººè„¸æ¯”å¯¹ã€‚å›¾åƒå‹ç¼©ä¸æ˜¯æ ¸å¿ƒè¯†åˆ«æ­¥éª¤ï¼Œè¿‡åº¦å‹ç¼©ç”šè‡³å¯èƒ½ä¸¢å¤±ç»†èŠ‚å½±å“è¯†åˆ«å‡†ç¡®ç‡ã€‚"  
            },  
            {  
                question: "åœ¨äººè„¸è¯†åˆ«ä¸­ï¼Œè®¡ç®—æœºæå–çš„\"ç‰¹å¾\"ä¸»è¦æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿ",  
                options: ["è„¸éƒ¨çš„é¢œè‰²", "è„¸éƒ¨å…³é”®ç‚¹çš„ä½ç½®å’Œè·ç¦»", "å¤´å‘çš„é•¿çŸ­", "çš®è‚¤çš„ç»†è…»ç¨‹åº¦"],  
                correct: 1,  
                explanation: "è®¡ç®—æœºé€šè¿‡æå–çœ¼ç›ã€é¼»å­ã€å˜´å·´ç­‰å…³é”®ç‚¹çš„ä½ç½®ã€è·ç¦»ã€è§’åº¦ç­‰å‡ ä½•ç‰¹å¾æˆ–æ·±åº¦ç‰¹å¾æ¥è¿›è¡Œè¯†åˆ«ï¼Œè¿™äº›ç‰¹å¾æ„æˆäº†ç‹¬ä¸€æ— äºŒçš„\"äººè„¸æŒ‡çº¹\"ã€‚"  
            },  
            {  
                question: "ä»¥ä¸‹å“ªç§åº”ç”¨åœºæ™¯ä¸»è¦ä½¿ç”¨äº†äººè„¸è¯†åˆ«æŠ€æœ¯ï¼Ÿ",  
                options: ["æ‰‹æœºæŒ‡çº¹è§£é”", "è¿›é—¨æ—¶åˆ·è„¸è¿‡é—¸æœº", "æ‰«æäºŒç»´ç ä»˜æ¬¾", "è¯­éŸ³æ§åˆ¶æ™ºèƒ½éŸ³ç®±"],  
                correct: 1,  
                explanation: "åˆ·è„¸è¿‡é—¸æœºç›´æ¥åº”ç”¨äº†äººè„¸è¯†åˆ«æŠ€æœ¯æ¥éªŒè¯èº«ä»½ã€‚Aæ˜¯æŒ‡çº¹è¯†åˆ«ï¼ŒCæ˜¯å›¾åƒè§£ç ï¼ŒDæ˜¯è¯­éŸ³è¯†åˆ«ã€‚"  
            },  
            {  
                question: "å…³äºäººè„¸è¯†åˆ«æŠ€æœ¯çš„å®‰å…¨æ€§ï¼Œä¸‹åˆ—è¯´æ³•æ­£ç¡®çš„æ˜¯ï¼Ÿ",  
                options: ["äººè„¸è¯†åˆ«ç»å¯¹å®‰å…¨ï¼Œæ— æ³•è¢«ç ´è§£", "ä½¿ç”¨ç…§ç‰‡æˆ–è§†é¢‘ä¸€å®šèƒ½ç ´è§£æ‰€æœ‰åˆ·è„¸ç³»ç»Ÿ", "æ´»ä½“æ£€æµ‹æŠ€æœ¯å¯ä»¥æœ‰æ•ˆé˜²æ­¢ç…§ç‰‡æˆ–è§†é¢‘æ”»å‡»", "äººè„¸æ•°æ®æ³„éœ²åå¯ä»¥åƒå¯†ç ä¸€æ ·éšæ„ä¿®æ”¹"],  
                correct: 2,  
                explanation: "æ´»ä½“æ£€æµ‹ï¼ˆå¦‚çœ¨çœ¼ã€æ‘‡å¤´ã€çº¢å¤–æ£€æµ‹ç­‰ï¼‰æ˜¯é˜²æ­¢ç…§ç‰‡/è§†é¢‘æ”»å‡»çš„é‡è¦æ‰‹æ®µã€‚äººè„¸æ˜¯ç”Ÿç‰©ç‰¹å¾ï¼Œä¸€æ—¦æ³„éœ²æ— æ³•ä¿®æ”¹ï¼Œæ‰€ä»¥æ•°æ®ä¿æŠ¤å°¤ä¸ºé‡è¦ã€‚"  
            }  
        ];

        // çŠ¶æ€å˜é‡  
        let currentQuestionIndex = 0;  
        let score = 0;  
        let userInfo = {};  
        let answers = [];  // è®°å½•æ¯é“é¢˜çš„å¯¹é”™æƒ…å†µ
        let isAnswered = false;

        // DOM å…ƒç´   
        const loginScreen = document.getElementById('login-screen');  
        const quizScreen = document.getElementById('quiz-screen');  
        const resultScreen = document.getElementById('result-screen');  
        const loginForm = document.getElementById('login-form');  
        const questionText = document.getElementById('question-text');  
        const optionsContainer = document.getElementById('options-container');  
        const nextBtn = document.getElementById('next-btn');  
        const feedbackArea = document.getElementById('feedback-area');  
        const progressBar = document.getElementById('progress-bar');  
        const currentQNum = document.getElementById('current-q');

        // ç™»å½•å¤„ç†  
        loginForm.addEventListener('submit', (e) => {  
            e.preventDefault();  
            userInfo = {  
                class: document.getElementById('class-input').value,  
                name: document.getElementById('name-input').value,  
                number: document.getElementById('number-input').value  
            };  
            
            document.getElementById('user-info-display').textContent = `${userInfo.class} ${userInfo.name}`;  
            
            // åˆ‡æ¢ç•Œé¢åŠ¨ç”»  
            anime({  
                targets: loginScreen,  
                opacity: 0,  
                translateY: -20,  
                duration: 400,  
                easing: 'easeInQuad',  
                complete: () => {  
                    loginScreen.classList.add('hidden');  
                    quizScreen.classList.remove('hidden');  
                    quizScreen.classList.add('fade-in');  
                    loadQuestion();  
                }  
            });  
        });

        // åŠ è½½é¢˜ç›®  
        function loadQuestion() {  
            const q = questions[currentQuestionIndex];  
            isAnswered = false;  
            
            // æ›´æ–°è¿›åº¦  
            currentQNum.textContent = currentQuestionIndex + 1;  
            progressBar.style.width = `${((currentQuestionIndex) / questions.length) * 100}%`;  
            
            // é‡ç½®ç•Œé¢  
            questionText.textContent = q.question;  
            optionsContainer.innerHTML = '';  
            feedbackArea.classList.add('hidden');  
            nextBtn.classList.add('hidden');  
            
            // ç”Ÿæˆé€‰é¡¹  
            q.options.forEach((opt, index) => {  
                const btn = document.createElement('button');  
                btn.className = 'option-btn w-full text-left p-4 rounded-xl border border-gray-200 hover:border-blue-300 bg-white text-gray-700 font-medium transition-all duration-200';  
                btn.innerHTML = `<span class="inline-block w-6 h-6 rounded-full bg-gray-100 text-gray-500 text-center text-sm leading-6 mr-3">${String.fromCharCode(65 + index)}</span>${opt}`;  
                btn.onclick = () => checkAnswer(index, btn);  
                optionsContainer.appendChild(btn);  
            });

            // é¢˜ç›®å…¥åœºåŠ¨ç”»  
            anime({  
                targets: [questionText, optionsContainer.children],  
                translateY: [20, 0],  
                opacity: [0, 1],  
                duration: 500,  
                delay: anime.stagger(100),  
                easing: 'easeOutQuad'  
            });  
        }

        // æ£€æŸ¥ç­”æ¡ˆ  
        function checkAnswer(selectedIndex, btn) {  
            if (isAnswered) return;  
            isAnswered = true;

            const q = questions[currentQuestionIndex];  
            const isCorrect = selectedIndex === q.correct;  
            
            // è®°å½•ç­”æ¡ˆ
            answers.push(isCorrect);
            
            const allBtns = optionsContainer.children;

            // æ ·å¼æ›´æ–°  
            if (isCorrect) {  
                score += 20;  
                btn.classList.add('correct');  
                showFeedback(true, q.explanation);  
            } else {  
                btn.classList.add('wrong');  
                allBtns[q.correct].classList.add('correct'); // æ˜¾ç¤ºæ­£ç¡®ç­”æ¡ˆ  
                showFeedback(false, q.explanation);  
            }

            // ç¦ç”¨æ‰€æœ‰æŒ‰é’®  
            Array.from(allBtns).forEach(b => b.disabled = true);

            // æ˜¾ç¤ºä¸‹ä¸€é¢˜æŒ‰é’®  
            nextBtn.classList.remove('hidden');  
            nextBtn.textContent = currentQuestionIndex === questions.length - 1 ? "æŸ¥çœ‹ç»“æœ" : "ä¸‹ä¸€é¢˜";  
            
            // æŒ‰é’®å…¥åœºåŠ¨ç”»  
            anime({  
                targets: nextBtn,  
                scale: [0.9, 1],  
                opacity: [0, 1],  
                duration: 300  
            });  
        }

        // æ˜¾ç¤ºåé¦ˆ  
        function showFeedback(isCorrect, text) {  
            feedbackArea.classList.remove('hidden');  
            const title = document.getElementById('feedback-title');  
            const content = document.getElementById('feedback-text');  
            const icon = document.getElementById('feedback-icon');

            if (isCorrect) {  
                feedbackArea.className = 'mt-6 p-4 rounded-lg bg-green-50 border border-green-200';  
                title.textContent = "å›ç­”æ­£ç¡®ï¼ğŸ‰";  
                title.className = "font-bold text-green-800 mb-1";  
                icon.innerHTML = `<svg class="w-6 h-6 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`;  
            } else {  
                feedbackArea.className = 'mt-6 p-4 rounded-lg bg-red-50 border border-red-200';  
                title.textContent = "å›ç­”é”™è¯¯";  
                title.className = "font-bold text-red-800 mb-1";  
                icon.innerHTML = `<svg class="w-6 h-6 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`;  
            }  
            content.textContent = text;

            anime({  
                targets: feedbackArea,  
                height: [0, feedbackArea.scrollHeight],  
                opacity: [0, 1],  
                duration: 400,  
                easing: 'easeOutQuad'  
            });  
        }

        // ä¸‹ä¸€é¢˜æŒ‰é’®ç‚¹å‡»  
        nextBtn.addEventListener('click', () => {  
            if (currentQuestionIndex < questions.length - 1) {  
                currentQuestionIndex++;  
                loadQuestion();  
            } else {  
                showResult();  
            }  
        });

        // æ˜¾ç¤ºç»“æœ  
        async function showResult() {  
            quizScreen.classList.add('hidden');  
            resultScreen.classList.remove('hidden');  
            resultScreen.classList.add('fade-in');

            document.getElementById('result-user').textContent = `${userInfo.class} - ${userInfo.name}`;  
            
            // åˆ†æ•°æ»šåŠ¨åŠ¨ç”»  
            anime({  
                targets: { val: 0 },  
                val: score,  
                round: 1,  
                duration: 1500,  
                easing: 'easeOutExpo',  
                update: function(anim) {  
                    document.getElementById('final-score').textContent = anim.animatables[0].target.val;  
                }  
            });

            // è¯„ä»·è¯­  
            const comment = document.getElementById('score-comment');  
            if (score === 100) comment.textContent = "å¤ªæ£’äº†ï¼ä½ æ˜¯äººè„¸è¯†åˆ«ä¸“å®¶ï¼ğŸŒŸ";  
            else if (score >= 80) comment.textContent = "æˆç»©ä¼˜ç§€ï¼æŒæ¡å¾—ä¸é”™å“¦ï¼ğŸ‘";  
            else if (score >= 60) comment.textContent = "åŠæ ¼å•¦ï¼ç»§ç»­åŠ æ²¹ï¼ğŸ’ª";  
            else comment.textContent = "è¿˜éœ€è¦å¤šå¤ä¹ ä¸€ä¸‹ç›¸å…³çŸ¥è¯†å“¦ ğŸ“š";  
            
            // æäº¤æ•°æ®åˆ°åç«¯
            await submitResult();
        }  
        
        // é…ç½®å˜é‡
        const API_BASE_URL = 'https://face-recognition-backend-1-msm7.onrender.com';

        // æäº¤ç»“æœå‡½æ•°
        async function submitResult() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/submit`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        userInfo: userInfo,
                        score: score,
                        answers: answers,
                        submitTime: new Date().toISOString()
                    })
                });
                
                if (response.ok) {
                    console.log('æ•°æ®æäº¤æˆåŠŸ');
                } else {
                    console.error('æ•°æ®æäº¤å¤±è´¥');
                }
            } catch (error) {
                console.error('æäº¤æ•°æ®æ—¶å‡ºé”™:', error);
            }
        }
    </script>  
</body>  

</html>  
